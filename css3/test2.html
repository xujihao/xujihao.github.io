<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>钢琴教室</title>
	<link rel="stylesheet" type="text/css" href="css/test2.css">
</head>
<body>
	<div class="g-ctn">
		<div class="m-title">
			The ONE 智能音乐教室 ｜ <span class="part">有效教学</span>
		</div>
		<div class="m-head">
			<img src="images/icon-2.png" class="head-icon">
			<div class="head-title">
				<h1>The ONE 智能音乐教室</h1>
				<h1>孩子上了还想上的钢琴课</h1>
			</div>
			<div class="head-text">
				互联网时代的全新线下音乐教育产品，更是针对4-6岁孩子天性量身定制的钢琴课。我们相信，未来的音乐教育更快乐高效，也更顺应孩子的天性。钢琴课有趣，孩子便能在玩乐中高效学习，钢琴课有效，孩子更能充分释放音乐天赋！
			</div>
		</div>
		<div class="m-descs">
			<div class="desc">
				<img src="images/1-1.png" alt="" class="icon">
				<h1 class="title">独创步骤教学法<br>更有效的音乐启蒙</h1>
				<p class="text">科学编排课程，合理分拆复杂的知识点，孩子在趣味中一步步掌握键位、指法、节奏、五线谱、音名唱名、曲调弹唱，每节课后都能识谱弹奏，轻松释放天赋！</p>
			</div>
		</div>
		<div class="m-arrow">
			
		</div>
		<div class="m-navigations">
			
		</div>

		<div class="wrapper">
			<ul class="sub-wrapper sm-wrapper" data-index="0">
				<div class="m-photos">
					<li class="photo active" data-index="0">
						<img src="images/1-1.jpg" >
						<div class="mask">
							<div class="textmask">
							有效教学
							</div>
						</div>
					</li>
					<li class="photo hidden-photo" data-index="1">
						<img src="images/1-2.jpg" >
						<div class="mask">
						</div>
					</li>
					<li class="photo hidden-photo" data-index="2">
						<img src="images/1-3.jpg" >
						<div class="mask">
						</div>
					</li>
					<li class="photo hidden-photo" data-index="3">
						<img src="images/1-4.jpg" >
						<div class="mask">
						</div>
					</li>
				</div>
				<div class="loaders">
					<div class="top"></div>
					<div class="left"></div>
					<div class="right"></div>
					<div class="bottom"></div>
				</div>
			</ul>
			<ul class="sub-wrapper sub-wrapper1 sm-wrapper" data-index="1">
				<div class="m-photos">
					<li class="photo active" data-index="0">
						<img src="images/2-1.jpg" >
						<div class="mask">
							<div class="textmask">
							有趣课程
							</div>
						</div>
					</li>
					<li class="photo hidden-photo" data-index="1">
						<img src="images/2-2.jpg" >
						<div class="mask">
						</div>
					</li>
					<li class="photo hidden-photo" data-index="2">
						<img src="images/2-3.jpg" >
						<div class="mask">
						</div>
					</li>
					<li class="photo hidden-photo" data-index="3">
						<img src="images/2-4.jpg" >
						<div class="mask">
						</div>
					</li>
				</div>
				<div class="loaders">
					<div class="top"></div>
					<div class="left"></div>
					<div class="right"></div>
					<div class="bottom"></div>
				</div>
			</ul>
			<ul class="sub-wrapper sub-wrapper2 sm-wrapper" data-index="2">
				<div class="m-photos">
					<li class="photo active" data-index="0">
						<img src="images/3-1.jpg">
						<div class="mask">
							<div class="textmask">
							社交互动
							</div>
						</div>
					</li>
					<li class="photo hidden-photo" data-index="1">
						<img src="images/3-2.jpg" >
						<div class="mask">
						</div>
					</li>
					<li class="photo hidden-photo" data-index="2">
						<img src="images/3-3.jpg" >
						<div class="mask">
						</div>
					</li>
				</div>
				<div class="loaders">
					<div class="top"></div>
					<div class="left"></div>
					<div class="right"></div>
					<div class="bottom"></div>
				</div>
			</ul>
		</div>
	</div>
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script type="text/javascript">
		$(function(){
			var timer,timer2,wrap={},html='';
			function getStatus(){
				wrap.bodyWidth=$('body').width(),
				wrap.bodyHeight=$('body').height(),
				wrap.marginL=(wrap.bodyWidth-1230)/2,
				wrap.imgW=wrap.bodyWidth*0.45,
				wrap.imgH=wrap.imgW*0.65,
				wrap.topV=(wrap.bodyHeight-wrap.imgW*0.65)/2;	
			}
			function showLoaders(ctn){
				var loaders=ctn.find('.loaders');
				loaders.css('zIndex','100').find('.top').animate({width:'100%'},1000);
				loaders.find('.bottom').animate({left:0},1000);
				loaders.find('.right').animate({height:'100%'},1000);
				loaders.find('.left').animate({top:0},1000);
			}
			function resetLoaders(ctn){
				var loaders=ctn.find('.loaders');
				loaders.css('zIndex',-10).find('.top').css('width',0);
				loaders.find('.bottom').css('left','100%');
				loaders.find('.right').css('height','0%');
				loaders.find('.left').css('top','100%');

				ctn.find('.mask').hide();
			}
			function dfdAnimate(options,time,ctn){
				var dfd=$.Deferred();
				ctn.animate(options,time,function(){
					dfd.resolve();
				});
				return dfd;
			}
			function upDown(self){
				var siblings=self.siblings();
				siblings.animate({top:'600px'},1000);
				var left=parseInt(self.css('left')),
					transL=wrap.bodyWidth-wrap.imgW-wrap.marginL-100,
					transH=590-wrap.topV;
				dfdAnimate({top:'-330px'},1000,self)
				.then(function(){
					return dfdAnimate({left:transL+'px'},1000,self)})
				.then(function(){
					self.animate({
						top:'-590px',
						height:wrap.bodyHeight+'px',
					    width:wrap.imgW+'px'
					},600);
					self.find('.photo').animate({
						width:'100%',
						height:wrap.imgH,
						top:wrap.topV
					},600).find('img').css({
						width:'100%',
						height:'100%',
						top:0,
						left:0
					});
					setTimeout(function(){
						var hphotos=self.find('.hidden-photo');
						hphotos.show().find('.mask').hide();
						hphotos.each(function(index,item){
							if(index==hphotos.length-1){
								dfdAnimate({top:-(wrap.imgH-wrap.topV+10)+'px'},600,$(item))
								.then(function(){
									var btns='';
									self.find('.photo').each(function(index,item){
										if(index==0){
											btns+='<div class="navBtn active" data-index="'+index+'"><div class="dot"></div></div>';
										}
										else{
											btns+='<div class="navBtn" data-index="'+index+'"><div class="dot"></div></div>';
										}
									});
									$('.m-navigations').addClass('show-navigations').append(btns);
									$('.m-descs').show().animate({opacity:1},500);
									$('.m-arrow').show();
									$('.m-title').show().find('.part').text(self.find('.textmask').text());
									showText(0,self.data('index'));
									self.find('.photo,.mask,img').css('position','static');
									self.find('.photo').css('marginBottom','10px').last().prependTo(self.find('.m-photos'))
										.css('marginTop',-(wrap.imgH-wrap.topV+10)+'px');
								});
							}
							else{
								$(item).animate({top:((wrap.imgH+10)*(index+1)+wrap.topV)+'px'},200);
							}
						});
					},600);
				});
			}
			$('.wrapper').delegate('.sm-wrapper','click',function(){

				var self=$(this);
				if(timer)
					return;
				timer=setTimeout(function(){
					timer=null;
				},3000);
				html=self.find('.m-photos').html();
				getStatus();
				showLoaders(self);
				setTimeout(function(){
					resetLoaders(self);
					upDown(self);
					self.removeClass('sm-wrapper').addClass('v-wrapper');
					$('.m-head').animate({opacity:0},1000);
				},1000);
			});

			$('.m-arrow').bind('click',function(){
				var wrapper=$('.v-wrapper'),
					index=wrapper.data('index');
				wrapper.find('.photo,.mask,img').css('position','absolute');
				wrapper.find('.photo').css({
					margin:0,
					top:0,
					height:'100%',
					display:'none'
				});
				$('.m-navigations').empty().removeClass('show-navigations');
				wrapper.find('.photo.active').removeClass('active').addClass('hidden-photo');
				wrapper.find('.photo[data-index=0]').addClass('active').removeClass('hidden-photo').show().find('.mask').show();
				wrapper.siblings().animate({top:0},800);
				wrapper.animate({
					top:0,
					height:260,
					width:400,
					left:index*(410)
				},800,function(){
					wrapper.find('.active').find('img').css({
						top:'-10%',
						left:'-10%',
						width:'120%',
						height:'120%'
					});
					wrapper.find('.m-photos').html(html);
					wrapper.removeClass('v-wrapper').addClass('sm-wrapper');
					$('.m-head').animate({opacity:1},1000);
					$('.m-descs,.m-arrow,.m-title').hide();
				});
			});

			$('.m-navigations').delegate('.navBtn','click',function(){
				if(timer2)
					return;
				timer2=setTimeout(function(){
					timer2=null;
				},1000);
				var wrapIndex=$('.v-wrapper').data('index');
				$(this).siblings().removeClass('active');
				$(this).addClass('active');
				var index=$(this).data('index'),
					activeIndex=$('.v-wrapper .active').data('index'),
					step=index-activeIndex,
					marT=-(wrap.imgH-wrap.topV+10)+'px';
				var mp=$('.v-wrapper').find('.m-photos');
				console.log(index,activeIndex);
				if(step>0){
					mp.animate({top:-(wrap.imgH+10)*step},1000,function(){
						mp.css('top',0);
						var photos=mp.find('.photo');
						var temp=[];
						for(var i=0;i<step;i++){
							temp.push(photos.eq(i).css('marginTop',0));
						}
						mp.append(temp);
						mp.find('.photo').first().css('marginTop',marT);
						mp.find('.active').removeClass('active').addClass('hidden-photo').show();
						mp.find('.photo').eq(1).removeClass('hidden-photo').addClass('active');
					});
				}
				else if(step<0){
					var photos=$(mp.find('.photo')),
						len=photos.length-1;
					photos.first().css('marginTop',0);
					var temp=[];
					for(var i=Math.abs(step);i>0;i--){
						temp.push(photos.eq(len-i+1).css('marginTop',0));
					}
					mp.prepend(temp);
					mp.find('.photo').first().css('marginTop',marT);
					mp.css('top',-(wrap.imgH+10)*(-step)).animate({'top':0},1000,function(){
						mp.find('.active').removeClass('active').addClass('hidden-photo').show();
						mp.find('.photo').eq(1).removeClass('hidden-photo').addClass('active');
					});
				}
				showText(index,wrapIndex);
			});

			function showText(index,wrapIndex){
				$('.m-descs .icon').attr('src','images/'+(wrapIndex+1)+'-'+(index+1)+'.png');
				var textCtn=$('.desc .text'),
					titleCtn=$('.desc .title');
				var titles=[['独创步骤教学法，更有效的音乐启蒙','美国Alfred Music权威幼教，专业课程很快乐','全新智能视听体验，跟灯弹奏更有趣','智能模式互动练习，脱灯识谱没压力'],
							['连环闯关故事之旅，更有趣的高效学琴','闯关游戏边玩边学，钢琴考级很轻松','边弹边唱表演故事，反复练琴不枯燥','名曲赏析品味艺术，音乐素养更全面'],
							['集体课上互动PK，更友善的竞争氛围','课堂考核实时反馈，心中有谱更放心','学琴成绩社交分享，家人陪伴有兴致']
					],
					texts=[['科学编排课程，合理分拆复杂的知识点，孩子在趣味中一步步掌握键位、指法、节奏、五线谱、音名唱名、曲调弹唱，每节课后都能识谱弹奏，轻松释放天赋！','原版引进全球最大音乐出版商——Alfred Music的经典教材，又创造性的融入孩子喜欢的卡通故事，专业教学不枯燥，钢琴课从未如此快乐，孩子学琴兴致越来越高，一天天爱上弹琴。','跟着老师唱歌熟悉乐曲，听着语音了解乐理，再看着视频调整坐姿、手型，每节课由有趣的视听来引导，琴键上的灯辅助入门，孩子在课堂上便能快速熟悉键位、指法，再多曲子也能轻松掌握。','在流动的五线谱上练曲子，在掉落的小花游戏中打节拍，几种模式，快慢不一，弹错会智能纠错、标红等待，孩子在与他人的PK中就能掌握节奏、学会识谱，每节课后都能脱灯弹奏，轻松变身小钢琴家。'],
						['专业的钢琴教育，也是一次连环故事之旅，孩子在有故事的音乐世界中更有代入感，吸收专业知识更积极也更充分，游戏中便能高效学会弹唱、完成考级！','每节课都是一段连环小故事，每学一个乐曲，都是一次闯关，闯过40关，就能学完经典钢琴入门教材《小汤普森》3；闯过80关，轻松搞定《小汤普森》4；系列课程全部通关，更能达到中央音乐学院钢琴4-5级水平。','每一次弹琴，都有背景伴奏，不同的故事，也配有不同的伴奏和歌唱曲，孩子的每一次练琴，都像是一次轻松的故事表演，练琴再多也不枯燥，边弹边唱也更好玩，学会曲子即刻就能弹唱。','趣味名曲赏析，由中央音乐学院专业团队编写，孩子学习世界名曲，也开始学习名曲背后作曲家们的故事，弹的同时还懂音乐，孩子学会的不仅是钢琴，更是终生受用的综合音乐素养！'],
						['有同伴的钢琴课更放松，用智能系统连接钢琴与屏幕，一对多的师生关系亲密无间，在友善的竞争中，和同伴一起课堂PK，学琴就像共同探险般快乐，效率自然更高。','每次钢琴课结束后，孩子的学习情况和考核成绩都会实时推送给家长，大至学习曲目，小到弹对弹错细节，孩子的个性学琴记录，家长在家就能一一掌握，亲子之间有互动，辅导练琴更有谱。','音乐教室里孩子的账号能多方绑定，全家人都能时刻关注孩子近况，学琴成绩也能分享朋友圈，孩子的点滴进步随时都能晒，一个人的学琴路从此不孤单，让孩子在音乐与爱中快乐成长。']
					];
				titles=titles[wrapIndex];
				texts=texts[wrapIndex];
				switch(index){
					case 0:
						titleCtn.text(titles[0]);
						textCtn.text(texts[0]);
						break;
					case 1:
						titleCtn.text(titles[1]);
						textCtn.text(texts[1]);
						break;
					case 2:
						titleCtn.text(titles[2]);
						textCtn.text(texts[2]);
						break;
					case 3:
						titleCtn.text(titles[3]);
						textCtn.text(texts[3]);
						break;
				}
			}
		});
	</script>
</body>
</html>