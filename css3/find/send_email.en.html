<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>Reset password</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
	<link rel="stylesheet" href="css/psd.css">
	<script src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
</head>
<body>
	<div class="m-header">
		<a class="btn_back" href="/">Back</a>
		<div class="wrap">
			<div class="logo en"></div>
			<span class="title">Reset pass word</span>
		</div>
	</div>
	<div class="m-wrap">
		<input type="text" name="email" id="email" placeholder="please enter a registered mail">

		<button>Reset</button>
		<div class="feedback"><span class="icon"></span>Password reset link has been sent.<br>（if you don't receive，<span class="m-second"><span class="seconds">69</span>seconds later</span>you can send again）</div>
	</div>
	<script>
		$(function(){
			$('button').bind('click',function(){
				var email=$('#email').val();
				if(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(email)){
					$.ajax({
						type:'post',
						data:{email:email},
						url:'',
						error:function(){
							console.log('failed to send the email');
						}
					});

					$('.seconds').html(69);
					$('.feedback').css('visibility','visible');
					$('.m-second').show();
					var self=$(this);
					self.attr('disabled','true');
					self.addClass('disabled');
					var second=0;
					var _intervalId=setInterval(function(){
						second++;
						$('.seconds').html(69-second)
						if((69-second)===0){
							self.removeAttr('disabled');
							self.removeClass('disabled');
							clearInterval(_intervalId);
							$('.m-second').hide();
						}
					},1000);
				}
				else{
					alert('please enter a right format email address');
				}
			});
		});
	</script>
</body>
</html>